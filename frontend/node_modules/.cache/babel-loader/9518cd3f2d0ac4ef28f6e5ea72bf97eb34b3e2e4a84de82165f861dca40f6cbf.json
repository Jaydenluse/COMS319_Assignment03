{"ast":null,"code":"var _jsxFileName = \"/Users/KKYAXYU/myproject/frontend/src/Products.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport ProductDescription from './ProductDescription';\nimport Toast from './Toast';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ProductsList = ({\n  isAdmin,\n  searchQuery\n}) => {\n  _s();\n  const [products, setProducts] = useState([]);\n  const [errors, setErrors] = useState({});\n  const [toastMessage, setToastMessage] = useState('');\n  const [showToast, setShowToast] = useState(false);\n  const filteredProducts = products.filter(product => product.title.toLowerCase().includes(searchQuery.toLowerCase()));\n  useEffect(() => {\n    axios.get('/products').then(response => {\n      setProducts(response.data);\n    }).catch(error => {\n      console.error('There was an error fetching the products', error);\n    });\n  }, []);\n  const handleUpdatePriceClick = async (productId, newPrice) => {\n    if (newPrice === null || isNaN(newPrice)) {\n      return;\n    }\n    if (newPrice < 0) {\n      setErrors({\n        ...errors,\n        [productId]: 'Invalid price'\n      });\n      return;\n    }\n    const updatedProducts = products.map(product => product._id === productId ? {\n      ...product,\n      price: newPrice\n    } : product);\n    setProducts(updatedProducts);\n    try {\n      await axios.put(`/products/${productId}/update-price`, {\n        newPrice\n      });\n      setErrors({\n        ...errors,\n        [productId]: ''\n      });\n      setToastMessage('Price updated successfully'); // Set success message\n      setShowToast(true); // Show toast notification\n    } catch (error) {\n      console.error('Error updating product price:', error);\n      setErrors({\n        ...errors,\n        [productId]: 'Update failed'\n      });\n      setProducts(products);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mx-auto p-4\",\n    children: [/*#__PURE__*/_jsxDEV(Toast, {\n      message: toastMessage,\n      show: showToast,\n      onClose: () => setShowToast(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6\",\n      children: filteredProducts.map(product => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"border border-gray-200 bg-white rounded-lg shadow-sm overflow-hidden\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"w-full h-64 object-cover\",\n          src: product.image,\n          alt: product.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"font-bold text-lg mb-2\",\n            children: product.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(ProductDescription, {\n            description: product.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between items-center mb-4\",\n            children: [isAdmin ? /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"bg-blue-100 text-blue-800 rounded-full px-3 py-1 text-sm font-semibold\",\n              onClick: () => {\n                const newPrice = prompt('Enter new price for ' + product.title, product.price);\n                handleUpdatePriceClick(product._id, parseFloat(newPrice));\n              },\n              children: [\"$\", parseFloat(product.price).toFixed(2)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 68,\n              columnNumber: 21\n            }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-blue-800 px-3 py-1 text-sm font-semibold\",\n              children: [\"$\", parseFloat(product.price).toFixed(2)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 21\n            }, this), errors[product._id] && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-bold error text-xs text-red-500 ml-3\",\n              children: errors[product._id]\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"bg-purple-100 text-purple-800 rounded-full px-3 py-1 text-sm font-semibold\",\n              children: product.category\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"border-t border-gray-200 pt-2\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-sm text-gray-600\",\n              children: [\"Rating: \", product.rating.rate]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 13\n        }, this)]\n      }, product._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this);\n};\n_s(ProductsList, \"cDJI0yVSfKfVlAQqigKp0ItTxBs=\");\n_c = ProductsList;\nexport default ProductsList;\nvar _c;\n$RefreshReg$(_c, \"ProductsList\");","map":{"version":3,"names":["React","useState","useEffect","axios","ProductDescription","Toast","jsxDEV","_jsxDEV","ProductsList","isAdmin","searchQuery","_s","products","setProducts","errors","setErrors","toastMessage","setToastMessage","showToast","setShowToast","filteredProducts","filter","product","title","toLowerCase","includes","get","then","response","data","catch","error","console","handleUpdatePriceClick","productId","newPrice","isNaN","updatedProducts","map","_id","price","put","className","children","message","show","onClose","fileName","_jsxFileName","lineNumber","columnNumber","src","image","alt","description","onClick","prompt","parseFloat","toFixed","category","rating","rate","_c","$RefreshReg$"],"sources":["/Users/KKYAXYU/myproject/frontend/src/Products.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport ProductDescription from './ProductDescription'; \nimport Toast from './Toast';\n\nconst ProductsList = ({ isAdmin, searchQuery }) => {\n  const [products, setProducts] = useState([]);\n  const [errors, setErrors] = useState({});\n  const [toastMessage, setToastMessage] = useState(''); \n  const [showToast, setShowToast] = useState(false); \n\n  const filteredProducts = products.filter(product =>\n    product.title.toLowerCase().includes(searchQuery.toLowerCase())\n  );\n\n  useEffect(() => {\n    axios.get('/products')\n      .then(response => {\n        setProducts(response.data);\n      })\n      .catch(error => {\n        console.error('There was an error fetching the products', error);\n      });\n  }, []);\n\n  const handleUpdatePriceClick = async (productId, newPrice) => {\n    if (newPrice === null || isNaN(newPrice)) {\n      return; \n    }\n    if (newPrice < 0) {\n      setErrors({ ...errors, [productId]: 'Invalid price' });\n      return;\n    }\n\n    const updatedProducts = products.map(product =>\n      product._id === productId ? { ...product, price: newPrice } : product\n    );\n    setProducts(updatedProducts);\n\n    try {\n      await axios.put(`/products/${productId}/update-price`, { newPrice });\n      setErrors({ ...errors, [productId]: '' });\n      setToastMessage('Price updated successfully'); // Set success message\n      setShowToast(true); // Show toast notification\n    } catch (error) {\n      console.error('Error updating product price:', error);\n      setErrors({ ...errors, [productId]: 'Update failed' });\n      setProducts(products);\n    }\n  };\n\n  return (\n    <div className=\"container mx-auto p-4\">\n      <Toast message={toastMessage} show={showToast} onClose={() => setShowToast(false)} />\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6\">\n        {filteredProducts.map(product => (\n          <div key={product._id} className=\"border border-gray-200 bg-white rounded-lg shadow-sm overflow-hidden\">\n            <img\n              className=\"w-full h-64 object-cover\"\n              src={product.image}\n              alt={product.title}\n            />\n            <div className=\"p-4\">\n              <h3 className=\"font-bold text-lg mb-2\">{product.title}</h3>\n              <ProductDescription description={product.description} />\n              <div className=\"flex justify-between items-center mb-4\">\n              {isAdmin ? (\n                    <button\n                      className=\"bg-blue-100 text-blue-800 rounded-full px-3 py-1 text-sm font-semibold\"\n                      onClick={() => {\n                        const newPrice = prompt('Enter new price for ' + product.title, product.price);\n                        handleUpdatePriceClick(product._id, parseFloat(newPrice));\n                      }}\n                    >\n                      ${parseFloat(product.price).toFixed(2)}\n                    </button>\n                  ) : (\n                    <span className=\"text-blue-800 px-3 py-1 text-sm font-semibold\">\n                      ${parseFloat(product.price).toFixed(2)}\n                    </span>\n                  )}\n                {errors[product._id] && <span className=\"font-bold error text-xs text-red-500 ml-3\">{errors[product._id]}</span>}\n                \n                <span className=\"bg-purple-100 text-purple-800 rounded-full px-3 py-1 text-sm font-semibold\">\n                  {product.category}\n                </span>\n              </div>\n              <div className=\"border-t border-gray-200 pt-2\">\n                <span className=\"text-sm text-gray-600\">\n                  Rating: {product.rating.rate} \n                </span>\n              </div>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );}\n\nexport default ProductsList;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}